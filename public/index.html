<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<!--  BOOTSTRAP -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!--  CUSTOM STYLE  -->
  <link rel="stylesheet" href="css/custom_bootstrap.css">
  <link rel="stylesheet" href="css/style.css">
  <title>Dropbox API Tutorial</title>

</head>
<body>
<div class="container-fullwidth">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <!--  MENU HEADER -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_items" aria-expanded="false">
          <span class="sr-only">Toggle Navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="home_link" class="navbar-brand" href="http://localhost:8080">Dropbox API Tutorial</a>
<!--          <a class="navbar-brand" href="https://web.engr.oregonstate.edu/~chapplev">Dropbox API Tutorial</a>-->
      </div>

      <!--  MENU ITEMS -->
      <div class="collapse navbar-collapse" id="menu_items">
        <ul class="nav navbar-nav">
          <li class="dropdown active">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Learn <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a id="getting_started_link" data-toggle="collapse" data-parent="#pageContent" href="#collapseGettingStarted">Getting Started</a></li>
                <li><a id="auth_demo_link" data-toggle="collapse" data-parent="#pageContent" href="#collapseAuthDemo">Demo</a></li>
                <li><a id="authentication_link" data-toggle="collapse" data-parent="#pageContent" href="#collapseAuth">Authentication</a></li>
                <li><a id = "api_link" data-toggle="collapse" data-parent="#pageContent" href="#collapseAPI">Dropbox Methods</a></li>
                <li><a id = "conclusion_link" data-toggle="collapse" data-parent="#pageContent" href="#collapseConclusion">Conclusion</a></li>
            </ul>
          </li>
            <li><a href="http://dropbox.github.io/dropbox-sdk-js/">Docs</a></li>
            <li><a href="https://nodejs.org/en/">Node.JS</a></li>
            <li><a href="http://browserify.org/">Browserify</a></li>
        </ul>
      </div>
    </div>
  </nav>
</div>
<div class="container">
    <div class="row">
        <div class="col-xs-12">
            <h1>Dropbox API: <small>A Beginner's Tutorial</small></h1>
            <h3>
                Welcome to the exciting world of APIs.  With a little practice, APIs will become another handy tool for your web development career.
            </h3>
            <p id="abstract">
                This tutorial is geared towards a <strong>beginning web developer</strong> who has had some programming language experience. We'll walk you through the setup for using the <strong>Dropbox API with JavaScript</strong>, but you can also see the full documentation on GitHub: <a href="https://github.com/dropbox/dropbox-sdk-js">Dropbox-SDK-js</a>. 
            </p>
            <h2>Learning Goals</h2>
            <ul>
                <li>Use Browserify to bundle JavaScript files for use in a browser</li>
                <li>Register an app through Dropbox Developers</li>
                <li>Authenticate Dropbox users via a URL</li>
<!--                <li>Selecting proper authentication based on needs</li>-->
                <li>Navigate folders and files in Dropbox</li>
            </ul>
        </div>
    </div>
    
    <div class="row">
        <div class="col-xs-12">
            <div id="pageContent" class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 id="getting_started" class="panel-title">
                            <a data-toggle="collapse" data-parent="#pageContent" href="#collapseGettingStarted">Getting Started</a>
                        </h2>
                    </div>
                
                     <div id="collapseGettingStarted" class="panel-collapse collapse bodyCollapse" aria-expanded="false">
                         <div class="panel-body">
                            <p>
                                There are many languages to use with Dropbox, but this tutorial utilizes <a href="https://github.com/dropbox/dropbox-sdk-js">Dropbox for Javascript</a>. While there is a way to use Dropbox in a script tag directly, We'll be using <strong>node</strong> to include the Dropbox node module in our webpage's JavaScript file. To use node in a web browser, we'll have to do quite a bit of setup. However, the preparation work is worth it for future use of this code.
                            </p>
                             <h3>Setup Overview</h3>
                            <ol>
                                <li>
                                    <a href="#install">Install</a> all the necessary programs in our app's folder. 
                                </li>
                                <ul>
                                    <li>Node with npm</li>
                                    <li>Dropbox (node module)</li>
                                    <li>Browserify (node module)</li>
                                </ul>
                                <li><a href="#using_start_script">Set Up</a> a npm start script for Browserify</li>
                                <li>
                                    <a href="#watchify">Install and Set Up</a> an optional node module Watchify. 
                                </li>
                            </ol>
                             <h3>Don't need the setup?</h3>
                            <p>
                                If you already know how to complete the above tasks, skip to the <a href="#register">Register Your App</a> section or <a href="#authentication">Authentication</a> section, which is where the API fun begins.  Specifically, Step 2 is the first instance of using JavaScript to utilize the API.
                            </p>
                            <h3 id="install">Installation</h3>

                            <h4>Node and npm</h4>
                            <p>
                                To start, make sure you have installed <strong>node.js</strong> and updated the included <strong>npm</strong>. If you do not have node and/or have not updated, follow the Getting Started instructions provided at <a href="https://docs.npmjs.com/getting-started/installing-node">npmjs.com</a>.
                            </p>
                            <p>
                                Also, we want to easily keep track of node packages, so we need to initialize npm, which creates a <strong>package.json</strong> file.  To create a package.json file, run the following command in your app's folder.
                            </p>
                            <pre>npm init</pre>
                            <p> 
                            </p>
                            <p>
                                Once you have initialized a package.json, you can document your app's dependencies by using the <code>--save</code> option when installing any node package.  This allows for easy reinstallation of all necessary programs in the event the node modules are deleted or omitted. For more information on the package.json file, you can visit <a href="https://docs.npmjs.com/getting-started/using-a-package.json">"Using a Package.json"</a>.
                            </p>

                            <h4>Dropbox SDK</h4>
                            <p>
                                Once you have node and npm correctly installed, follow the <a href="http://dropbox.github.io/dropbox-sdk-js/">Dropbox JS documentation</a> to install Dropbox using npm. Notice the <code>--save</code> option, which will log 'dropbox' in your package.json. We will <strong>not</strong> being using the unpkg method with script tags.
                            </p>

                            <h4>Browserify</h4>
                            <p>
                                Because we will be using node to access Dropbox, we will need a way to bundle our JavaScript files into a single, browser-friendly JavaScript file.  This step is necessary because web browsers do not have a way to interpret <code>require('dropbox')</code>. This is where <a href="http://browserify.org/">Browserify</a> comes to the rescue by combining our JavaScript file and all its dependencies into a single file. This single file is the script file we will then link in our web page.
                            </p>
                            <p>
                                Install Browserify with the following command in the same folder you installed Dropbox.  You'll see that Browserify will be added to the dependencies list in <strong>package.json</strong>.
                            </p>
                            <pre>npm install browserify --save</pre>

                            <h4>Running Browserify</h4>
                            <p>
                                Later, when we want to use our JavaScript file <strong>main.js</strong> in a web browser, we can use Browserify to combine <strong>main.js</strong> and its node dependencies into a single file called <strong>bundle.js</strong>. To do so, open the command line in your app's folder, and run the following command.
                            </p>
                            <pre>browserify main.js -o bundle.js</pre> 
                            <p>
                                Note, that the first file (<strong>main.js</strong>) must exist while the second file is created or overwritten.  Then, in your web page, you will link to the second file (<strong>bundle.js</strong>). Of course, like most command line actions you can also specify location of the filenames, and the names can be different than <strong>main.js</strong> or <strong>bundle.js</strong>.
                            </p>
                                
                             <h3 id="using_start_script" class="jumptarget">Using a Start Script</h3>
                            <p>
                                To help developers, npm has scripting capabilities.
                            </p>
                            <h4>Using Browserify</h4>
                            <p>
                                In the <strong>package.json</strong> file, you can see a variety of information, including a list of the app dependencies from the <code>--save</code> option.  In particular, look at the script section, which we will modify to include Browserify.
                            </p>    
                            <pre>"scripts": {<br />    "start": "browserify main.js -o bundle.js"<br>}</pre>
                            <p>
                                Once this script is saved in the package.json, you can run it in the command line.
                            </p>
                            <pre>npm start</pre>
                            <p>
                                For more information on scripts, you can visit <a href="https://docs.npmjs.com/misc/scripts">npm's documentation</a>
                            </p>


                            <h3 id="watchify">Optional: Watchify</h4>
                            <p>
                                The following step is not necessary, but it prevents you from having to manually run Browserify after changes to your JavaScript file.
                            </p>
                            <p>
                                Install the node module <a href="https://www.npmjs.com/package/watchify">Watchify</a>, which will continually <em>watch</em> for changes in your JavaScript file and run Browserify when changes occur.
                            </p>
                            <pre>npm install watchify --save</pre>
                            <p>
                                If you choose to use Watchify, you'll need to modify the start script in your app's package.json file. Replace the start script in the package.json with the following code. 
                            </p>
                            <pre>start": "watchify main.js -o bundle.js"</pre>
                            <p>
                                When you use <code>npm start</code> from the command line while in your app's folder, you will see watchify continually running, updating on each change of your <strong>main.js</strong> file. (To quit the process, press <kbd>ctrl+C</kbd>.)
                            </p>

                            <h3 id="register">Register Your App</h3>
                            <p>
                                Dropbox is a service that requires login. Whether you are wishing to access your own Dropbox files or the user's Dropbox files, you will need to register your website as a new app on Dropbox.
                            </p>
                            <ol>
                                <li>Go to Dropbox Developers to <a href="https://www.dropbox.com/developers/apps/create">Create app</a>.</li>
                                <li>Choose the Dropbox API.</li>
                                <li>Choose the Full Dropbox option.</li>
                                <li>Name your app.</li>
                            </ol>
                            <p>
                                You can find all your registered apps at <a href="https://www.dropbox.com/developers/apps">My Apps</a> on Dropbox Developers. This is also where you can adjust settings for your app or even delete your app from the Dropbox service.
                            </p>

                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 id="auth-demo" class="panel-title">
                            <a data-toggle="collapse" data-parent="#pageContent" href="#collapseAuthDemo" aria-expanded="false">Authentication Demo</a>
                        </h2>
                    </div>
                
                    <div id="collapseAuthDemo" class="panel-collapse collapse" aria-expanded="false">
                        <div class="panel-body">
                            <p>
                                Dropbox authenticates users using OAuth 2 flow. That is, you must ask for access to files from your users. Once approved, an access token is returned, which allows you to access the user's Dropbox.
                            </p>

                            <h3>Demo</h3>
                            <div id="no_auth_div" class="startHidden">
                                <p>This website is currently not authorized to access your Dropbox files. Click the button below to be directed towards Dropbox's authentication screen. After authenticating your Dropbox, the names of ten of your files and folders will be listed below.</p>
                                <div class="center">
                                    <button class="btn" id="getFilesBtn">Get Dropbox Files</button>
                                </div>
                            </div>
                            <div id="authed_div" class="startHidden">
                                <p>You authenticated your Dropbox successfully. The access token can be stored in a cookie or on the server. However, for this website, if you refresh, you will have to re-authenticate to run this demo.</p>
                                
                                <div class="center startHidden" id="Error">
                                </div>
                                <div class="center startHidden" id="folderCreated">
                                </div>
                                <div class="center">
                                    <button class="btn" id="createFolderBtn">Create Folder</button>
                                    <button class="btn" id="revokeBtn">Revoke Token</button>
                                </div>
                                <p><em>Results:</em> Here is a list of some of your file/folder names:</p>
                                <div id="files" class="filesList">
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
                
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 id="authentication" class="panel-title">
                            <a data-toggle="collapse" data-parent="#pageContent" href="#collapseAuth" aria-expanded="false">Authentication Tutorial</a>
                        </h2>
                    </div>
                
                    <div id="collapseAuth" class="panel-collapse collapse" aria-expanded="false">
                        <div class="panel-body">
                            <p>
                                Authentication can look intimidating, but Dropbox uses URL's to request authentication and send a response.
                            </p>
                            <h3>Overview</h3>
                            <p>
                                To display or try to access a user's Dropbox, we have to have a valid <strong>access token</strong>. To get an access token, the user must request us to have access to their Dropbox. In the case of the demo, the user clicks a button. On the button click, we use the Dropbox SDK to process the request for an access token. Once approved or denied, Dropbox redirects the user back to our page by using a return URI, which we set up as the location that we will handle the response from Dropbox.
                            </p>
                            <p>
                                Once the user has accepted the request for access to their Dropbox, we can use the access token to create a Dropbox object in our JavaScript.  The Dropbox object can then make requests about files and user information.
                            </p>
                            <h3>Steps</h3>
                            <ol>
                                <li>Set a redirect URI for our app on Dropbox and record the App key.</li>
                                <li>Create an event listener to determine when and how to request authentication.</li>    
                                <li>Create a function to check for authentication from the URL.</li>
                                <li>Set up logic to handle HTML for the cases of authenticated and not authenticated.</li>
                            </ol>
                            
                            <h3>Step 1: Redirect URI and App Key</h3>
                            <p>
                                When authenticating a user, we must provide Dropbox with a return address (<strong>redirect URI</strong>) to which to send the authentication results, as well as our app's key.
                            </p>
                            <ol>
                                <li>
                                    Determine the URI you wish to handle the returned authentication URL from Dropbox.
                                    <ul>
                                        <li>For testing, you could use <code>http://localhost:</code> followed by the appropriate port number.</li>
                                        <li>For live sites, you will need to use a URI starting with <code>https://</code></li>
                                    </ul>
                                </li>
                                <li>
                                    Register your app's redirect URI by navigating to your app in <a href="https://www.dropbox.com/developers/apps">apps on Dropbox</a>.  Then, under the <em>OAuth 2</em> section of your specific app, submit the redirect URI to your app.
                                </li>
                                <li>
                                    On the same web page, record for your reference your app's key under the <em>App key</em> section.  
                                </li>
                            </ol>
                            <p>
                                <strong><em>Note</em></strong>: This tutorial will not show how to keep your key private, but you need to secure your app key so that only your sites have access. Some protection is given in the fact that you must register your redirect URI with Dropbox.
                            </p>
                            <h3>Step 2: Request Authentication.</h3>
                            <p>
                                Let's finally begin the fun stuff. We'll be working with our <strong>main.js</strong> file from the <a href="#getting_started">Getting Started</a> section. The <strong>main.js</strong> file is the file in which we will use Dropbox. It is also the file that is compiled into <strong>bundle.js</strong> with Broswerfiy. Recall that <strong>bundle.js</strong> is the file that you will include in your HTML file.
                            </p>
                            
                            <h4>Include Dropbox</h4>
                            <p>
                                To use the JavaScript for Dropbox, you will need to require the node module called 'dropbox' by adding <code>var Dropbox = require('dropbox');</code> to the top of <strong>main.js</strong>.  This will allow us to create a new instance of Dropbox for our app.
                            </p>
                            <h4>Request Listener</h4>
                            <p>
                                Next, the user must request to access their Dropbox through your app.  In our <a href="#auth-demo">demo</a>, you clicked on a button to start this request process.
                            <p>
                                To follow the demo example, use JavaScript to get the particular button you wish to use to start the request for access to the user's Dropbox.  Then, add an onClick eventListener and pass it a function to create the authentication URL.
                            </p>
                            <p>
                                If you use a button with the id of <em>getFilesBtn</em>, you can add this onClick event listener to that button with the following code.
                            </p>
                            <pre>1  var getFilesBtn = document.getElementById('getFilesBtn');
2  
3  getFilesBtn.addEventListener('click', function(e) {
4      var myDropbox = new Dropbox({ clientId: APP_KEY});
5      var url = myDropbox.getAuthenticationUrl(baseUrl);
6      window.location = url;
7  };</pre>
                            <blockquote>
                                <p>
                                    <strong>Line 4</strong> In the above code, line 4 creates an instance of the Dropbox object called <code>myDropbox</code>. You must set the object's property of <code>clientId</code> to your app's key (<code>APP_KEY</code>), which you found in Step 1.
                                </p>
                                <p>
                                    <strong>Line 5</strong> Once the Dropbox instance is created with your app's key, you need to direct the user's browser to the Dropbox authentication website.  Dropbox makes this process very user-friendly by having a <code>getAuthenticationUrl()</code> method. This new URL is created by calling <code>myDropbox.getAuthenticationUrl(baseUrl)</code>, where baseURL is the redirect URI you registered with Dropbox.
                                </p>
                                <p>
                                    <strong>Line 6</strong> Next, set the <code>window.location</code> to the returned URL from the <code>.getAuthenticationUrl()</code> method.
                                </p>
                            </blockquote>
                            <p>
                                Once the user has clicked the button, the user will be directed to authenticate your app through Dropbox's website.  Once the user approves or denies your app access, the user will be directed to the redirect URI, which was stored in the <code>baseUrl</code> variable.
                            </p>
                            
                            <h3>Step 3: Get Access Token From URL</h3>
                            <p>
                                When a user accepts or denies your app access, Dropbox will send the user back to your website (via the redirect URI) and append a query string to this URL.  In this query string you will see various key/value pairs, possibly including a key called <strong>access_token</strong>.
                            </p>
                            <h4>
                                Example URL
                            </h4>
                            <p>
                                The return URL can have many key value pairs.
                            </p>
                            <pre>http://localhost:8080/#access_token=___&amp;token_type=bearer&amp;uid=__&amp;account_id=___</pre>
                            <h4>
                                Function: Parse URL for Access Token
                            </h4>
                            <p>
                                Create a function called <code>getAccessTokenFromURL()</code>.  You will be able to call this function in your <strong>main.js</strong> file after a user has attempted to authenticate your app.
                            </p>
                            <p>
                                Next, add a line inside this function to save the query string, which is in the hash of the window's current URL.
                            </p>
                            <pre>1  function getAccessTokenFromURL(){
2      var query = window.location.hash;
3  };</pre>
                            <p>     
                                After saving the query string, we now need to parse it so that we can get the access_token. There are many ways to parse a URL; however, below is a simple method using regular expressions to find and return the access token.
                            </p>
                            <h5>Scroll for All Code</h5>
                            <div class="longCode"><pre>1  function getAccessTokenFromUrl() {
2      var query = window.location.hash;
3      var result = null;
4      if (typeof query === 'string') {
5          <span class="comment">// Remove leading and trialing white space</span>
6          query.trim();
7          
8          <span class="comment">// Replace the # sign at beginning</span>
9          query.replace(/^#/)
10         
11         <span class="comment">// Check that string exists</span>
12         if (query.length == 0) {
13             return null;
14         }
15         else {
16             <span class="comment">// Split the pairs of key/value by "&amp;"</span>
17             var parts = query.split("&amp;");
18             for (var i = 0; i &lt; parts.length; i++) {    
19                 var part = parts[i];
20                 if (part.match('access_token=')){ <span class="comment">// Find access_token</span>
21                     result = part.split('=')[1]; 
22                     return result;
23                  }
24                  else if (part.match('error=')) { <span class="comment">// Find error</span>
25                      result = part.split('=')[1];
26                      return result;
27                  }
28              }
29          }
30      }
31      return null;
32  };</pre></div>
                            <blockquote>
                                <p>
                                    <strong>Lines 4-12</strong> The function tests that the query is actually of type string and then removes any whitespace, as well as the leading '#.' Also, if there is no query string, the function returns null.
                                </p>
                                <p>
                                    <strong>Lines 17-26</strong> The string is separated by key-value pairs first, and then the keys are compared to <strong>access_token</strong> or <strong>error</strong>. If either are matched the value of the matched key is returned.
                                </p>
                                 <p>     
                                    <strong>Alternatively</strong>: The query string could have been parsed into an object of the keys and a values, which could be returned by the function.
                                </p>
                            </blockquote>
                           
                            <h3>Step 4: Conditional HTML</h3>
                            <p>
                                Whether the user is using your app for the first time or has returned from the Dropbox authentication website, you will want to display information based on if the access token is valid or not.  Below are some example functions to help us adjust our HTML.
                            </p>
                            <h4>
                                Function: Test If Authenticated
                            </h4>
                            <p>
                                We will create a test function called <code>isAuth()</code> to return true for authenticated users and false if the access token is invalid or nonexistent.
                            </p>                           
                            <pre>1  var token = null;
2  function isAuth(){        
3       <span class="comment">// See if access token has a value, else get from URL</span>
4       if (token === null) {
5            token = getAccessTokenFromUrl();
6       }
7       if ((token === null) || (token === 'access_denied')) {
8            return false;
9       }
10      else {
11           return true;
12      }
13  };</pre>
                            <blockquote>
                                <p>
                                    <strong>Line 1</strong> For this tutorial, the access token is simply saved to a global variable, called <code>token</code>, and the token will not persist beyond a page refresh.  For you to avoid this, you could set up to store the access token in a session or on a server.
                                </p>
                                <p>
                                    <strong>Line 5</strong> If the token is not valid, the <code>getAccessTokenFromUrl()</code> is called, which will return the access token from the URL or return null.
                                </p>
                            </blockquote> 
                            
                            <h4>
                                Example Display
                            </h4>
                            <p>
                                The demo for this tutorial shows two different div blocks based on if the user is authenticated.  To do this, the <code>isAuth()</code> function is called and used as the conditional in an <code>if</code> statement.
                            </p>
                            <pre>1  if (isAuth()) {
2       <span class="comment">// authorized...</span>
3       document.getElementById("no_auth_div").style.display = 'none';
4       document.getElementById("authed_div").style.display = 'block';
5       <span class="comment">// ...do stuff with Dropbox Methods...</span>
6  }
7  else {
8       <span class="comment">// Not authorized, show get files button</span>
9       document.getElementById("no_auth_div").style.display = 'block';
10      document.getElementById("authed_div").style.display = 'none';
11 }</pre>
                            <p>
                                In the next section, we will add some code to line 5 in order to access the user's Dropbox.
                            </p>
                        </div>
                    </div>
                </div> 
                
                
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 id="api" class="panel-title">
                            <a data-toggle="collapse" data-parent="#pageContent" href="#collapseAPI" aria-expanded="false">Dropbox Methods</a>
                        </h2>
                    </div>
                    
                    <div id="collapseAPI" class="panel-collapse collapse"  aria-expanded="false">
                        <div class="panel-body">
                            <p>
                                Once a user is authenticated, you can create an instance of the Dropbox class and access a variety of information using the methods of that instance.
                            </p>
                            
                            <h3>
                                Dropbox Class
                            </h3>
                            <p>
                                To access a user's Dropbox, you will need to create a new instance of the Dropbox class, using the <code>new</code> operator and passing in the access <code>token</code>.
                            </p>
                            <pre>var myDropbox = new Dropbox({ accessToken: token});</pre>
                            <p>
                                You can then call various methods on <code>myDropbox</code> to explore the user's Dropbox. Here are three of these methods.
                            </p>
                            <strong>
                            <ul>
                                <li><a href="#filesListFolder">fileListFolder()</a></li>
                                <li><a href="#filesCreateFolder">filesCreateFolder()</a></li>
                                <li><a href="#authTokenRevoke">authTokenRevoke()</a></li>
                            </ul>
                            </strong>
                            <p>
                                While the methods are listed in <a href="http://dropbox.github.io/dropbox-sdk-js/Dropbox.html">documentation</a> for the Dropbox class, this tutorial explains some basic concepts involving each method's arguments.
                            </p>
                            <h3 id="filesListFolder">
                                Method: filesListFolder()
                            </h3>
                            <p>
                                You can access the files of a user by calling the <code>.filesListFolder()</code> method on <code>myDropbox</code>.
                            </p>
                            <pre>myDropbox.filesListFolder({path: ''})</pre>
                            <p>
                                The above line of code will return an object that is a list of all the files in the root directory of the user's Dropbox.  Other folders can be reached by changing the path property to another string.
                            </p>
                            <h4>Parameter: <small>FilesListFolderArg</small></h4>
                            <p>
                                Notice that the parameter is actually an object.  This object is called a <a href="http://dropbox.github.io/dropbox-sdk-js/global.html#FilesListFolderArg">FilesListFolderArg</a>.  You can add additional information to the FilesListFolderArg by setting any of the following boolean properties to true:
                            </p>
                            <ul>
                                <li>recursive</li>
                                <li>include_media_info</li>
                                <li>include_deleted</li>
                                <li>include_has_explicit_shared_members</li>
                            </ul>

                            <h4>Return: <small>Promise&lt;files list, error&gt;</small></h4>
                            <p>
                                Technically calling <code>.filesListFolder()</code> does not directly return an object of files. Instead, it returns a <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> object.</p>
                            <p>
                                For those new to Promises, you can think of it as an object to help asynchronous actions handle success and failure of events.  A promise is helpful because you can pass success and failure functions to this promise before you have a result returned from the asynchronous call.
                            </p>
                            <p>
                                After we make the call with <code>.filesListFolder()</code>, we can append a <code>.then()</code> call on the returned Promise.  The <code>.then()</code> call can include a function to use when the promise resolves (i.e. is successful) and/or another function to use when the promise is rejected or has an error.  See the Dropbox example below.</p>
                            <pre>1  myDropbox.filesListFolder({path: ''})
2       .then( function(response) {
3           <span class="comment">// Success: Do something with response</span>
4       }, function(error) {
5           <span class="comment">// Failure: Do something with error object</span>
6  })</pre>
                            <blockquote>
                                <p>
                                    <strong>Line 2</strong> Each of the functions passed into the <code>.then</code> call has one argument: a fulfillment value (<code>response</code>) for the resolved promise function and a reject value (<code>error</code>) for the rejected promise function.  
                                </p>
                                <p>
                                    <strong>Line 2 to 4</strong> contains the function used on the <em>success</em>.  The argument <code>response</code> can be named whatever you choose.
                                </p>
                                <p>
                                    <strong>Line 5 to 7</strong> contains the function used on the <em>error</em>. The argument <code>error</code> can be named whatever you choose.
                                </p>
                            </blockquote>
                            <h4>Accessing File Data</h4>
                            <p>
                                As stated earlier, the <code>.filesListFolder()</code> method returns a Promise, which can fulfill or reject the request.</p>
                            <ul>
                                <li>The fulfillment object that Dropbox returns and passes to the first function is an object of type <a href="http://dropbox.github.io/dropbox-sdk-js/global.html#FilesListFolderResult">FilesListFolderResult</a>.</li>
                                <li>The rejected object that Dropbox returns and passes to the second function is an object of type <a href="http://dropbox.github.io/dropbox-sdk-js/global.html#Error">Error</a>.</li>
                            </ul>
                            <p>
                                Assuming a successful request, there are several properties you can access through the returned FilesListFolderResult object. Particularly we can use the dot notation to access the <code>entries</code> property. The entries array contains the requested objects, which are represented in one of three types: 
                            </p>
                            <ul>
                                <li><a href="http://dropbox.github.io/dropbox-sdk-js/global.html#FilesFileMetadata">FilesFileMetadata</a></li>
                                <li><a href="http://dropbox.github.io/dropbox-sdk-js/global.html#FilesFolderMetadata">FilesFolderMetadata</a></li>
                                <li><a href="http://dropbox.github.io/dropbox-sdk-js/global.html#FilesDeletedMetadata">FilesDeletedMetadata</a></li>
                            </ul>
                            
                            <p>
                                You can access these individual file and folder objects in the entries array using indices or calling the <code>.forEach()</code> function.
                                An example of using an index to access the name property of the first entry is shown below.
                            </p>
                            <pre>1  myDropbox.filesListFolder({path: ''})
2       .then( function(response) {
3           <span class="comment">// Name of first file</span>
4           response.entries[0].name;
5       }, function(error) {
6           <span class="comment">// Do something with error object</span>
7           console.error(error); 
8  })</pre>
                            <p>
                                Suppose instead of <strong>Line 4</strong> you wished to create a list like in the tutorial.  You could create a function that accepts the <code>.entries</code> property as an argument and adds a list item for each entry.
                            </p>
                            <pre>1  function displayFiles(files){
2       var filesDiv = document.getElementById('files');
3       filesDiv.textContent = '';
4       var ol = document.createElement('ol');
5       ol.id = "fileList";
6       filesDiv.appendChild(ol);
7
8       files.forEach( function(file) {
9           var li = document.createElement('li');
10          li.innerHTML = file.name;
11          ol.appendChild(li);
12      });
13 };</pre>
                             <blockquote>
                                 <p>
                                     The above code uses the <code>forEach</code> function of arrays and appends a list item to an unordered list for all items in the array.
                                 </p>
                                 <p>
                                     Note that the user's Dropbox could still have more files not listed in the entries array. See <a href="http://dropbox.github.io/dropbox-sdk-js/Dropbox.html#filesListFolderContinue__anchor">filesListFolderContinue</a> documentation for more information.
                                 </p>
                            </blockquote>
                            
                            <h3 id="filesCreateFolder">
                                Method: filesCreateFolder()
                            </h3>
                            <p>
                                You can create a folder in the user's Dropbox by calling the <code>.filesCreateFolder()</code> method on <code>myDropbox</code> and passing in an <a href="http://dropbox.github.io/dropbox-sdk-js/global.html#FilesCreateFolderArg">FilesCreateFolderArg</a> object.
                            </p>
                            
                            <pre>myDropbox.filesCreateFolder()</pre>
                            <p>
                                
                            </p>
                            <h4>Parameter: <small>FilesListFolderArg</small></h4>
                            <p>
                                The FilesCreateFolderArg object contains two properties. The first is a 'path' property. This property is a string, which designates the path at which the folder is to be created, including the folder name.  The second is a boolean called 'autorename' which determines if a file needs to be renamed in case of a conflict.  The demonstration has this value set to false so that a new folder is not created on every button click.
                            </p>

                            <h4>Return: <small>Promise&lt;folder, error&gt;</small></h4>
                            <p>
                                The Promise will return a <a href="http://dropbox.github.io/dropbox-sdk-js/global.html#FilesFolderMetadata">FilesFolderMetadata</a> object if the request is successful or it will return an <a href="http://dropbox.github.io/dropbox-sdk-js/global.html#Error">Error</a> object if the promise is rejected.
                            </p>
                            <h4>Example</h4>
                            <pre>var newFolder = filesCreateFolder({path: '/newfoldername', autorename: true});</pre>
                            <p>
                                This code will create a folder at the root directory and name this folder "newfoldername" and store the reference to that folder in the variable newFolder. If the folder "newfoldername" already exists, Dropbox will attempt to rename the folder to one that does not have a conflict.
                            </p>
                            <h3 id="authTokenRevoke">
                                Method: authTokenRevoke()
                            </h3>
                            <p>
                                This method allows you to invalidate an access token for a Dropbox instance. To invalidate the access of <code>myDropbox</code>, call the <code>.authTokenRevoke()</code>.
                            </p>
                            <pre>myDropbox.authTokenRevoke();</pre>
                            <p>
                                
                            </p>
                            <h4>Parameter: <small>void</small></h4>
                            <p>
                                There are no parameters passed to this function.  You simply can call it on the instance of Dropbox that was created with the access_token you wish to revoke.
                            </p>
                            

                            <h4>Return: <small>Promise&lt;void, error&gt;</small></h4>
                            <p>
                                The value returned on a resolved promise is void; however, the value returned for a rejected promise is an error, which can be printed to the console.
                            </p>
                            <p>
                                This function is helpful for invalidating a current instance of Dropbox.  Once the token is revoked, future calls to that user's Dropbox will not work.  Be sure to update the webpage, as a refresh might be necessary.  You can also clear the access_token from your system.  By doing all of this authentication will be need to be requested again from the user.
                            </p>
                            <h4>Example</h4>
                            <p>
                                The following is an example of using a button click to revoke the access token. Notice the instance used to revoke the current token has the method <code>.authTokenRevoke()</code> called on it.  Additionally, the local storage of the access token is removed and a refresh is forced so that authentication is removed from the page.
                            </p>
                            <pre>1  var revokeBtn = document.getElementById('revokeBtn');
2  if (revokeBtn !== null) {
3       revokeBtn.addEventListener('click', function() {
4           var myDropbox = new Dropbox({ accessToken: token});
5           myDropbox.authTokenRevoke();
6           token = null;
7           location = baseUrl;
8       });
9  }</pre>
                         </div>
                    </div>
                </div>
                
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 id="conclusion" class="panel-title">
                            <a data-toggle="collapse" data-parent="#pageContent" href="#collapseConclusion" aria-expanded="false">Conclusion</a>
                        </h2>
                    </div>
                
                    <div id="collapseConclusion" class="panel-collapse collapse" aria-expanded="false">
                        <div class="panel-body">
                            <p>
                                You can use many languages to interact with Dropbox. Thankfully Dropbox does a decent job of keeping the structure of its API consistent throughout the languages.  Hopefully after exploring Dropbox with JavaScript you will be more comfortable debugging other languages and even other APIs 
                            </p>

                            <h3>Key Concepts</h3>
                            <ul>
                                <li>OAuth 2.0 is Dropbox's authentication method. You will need to have the user approve your app's access after you register with Dropbox's developers site.</li>
                                <li>You will need to store you app key and the user's access token for privacy and persistence.</li>
                                <li>Instances of Dropbox come with many methods. These functions take objects as arguments, which can be found in Dropbox's documentation.</li>
                            </ul>
                            <h3>Things Left Out</h3>
                            <ul>
                                <li>Dropbox offers <a href="https://www.dropbox.com/developers/chooser">Chooser</a> and <a href="https://www.dropbox.com/developers/saver">Saver</a> programs that do not require authentication</li>
                                <li>Look into the <a href="https://www.dropbox.com/developers/reference/developer-guide">developer's</a> guide for producing an app with Dropbox.</li>
                                <li>Utilize the <a href="https://dropbox.github.io/dropbox-api-v2-explorer/">API Explorer</a> from Dropbox.</li>
                                <li>Lastly, explore the <a href="https://www.dropbox.com/developers/reference/webhooks">Webhooks</a> offered by Dropbox, which will notify you of changes to user files.</li>
                            </ul>
                            <h3>Happy Coding!</h3>
                        </div>
                    </div>
                </div> 
                
            </div>
            <div class="row spacer"> </div>
        </div>
    </div>
    
</div>
   <script type="text/javascript" src="./js/bundle.js"></script> 
</body>
</html>